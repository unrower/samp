function createCookie(e,t,a){if(a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var n="; expires="+s.toGMTString()}else var n="";document.cookie=e+"="+t+n+"; path=/"}function readCookie(e){for(var t=e+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var n=a[s];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function setCookie(e){var t={path:"/",expires:60};createCookie("cookie",e,t),window.location.reload()}function activate(e){$.get("/engine/ajax/ajax.php",{ajax:"activate",id:e},function(e){"success"==e?$.jGrowl("Сервер успешно активирован, подождите некоторое время, когда мы обновим информацию о сервере!"):"noexits"==e?$.jGrowl("Сервера не существует в Базе!"):"already"==e&&$.jGrowl("Сервер уже активирован!")})}function vote(e,t,a){var s=$("#serv"+e+"-layer").get(0);$("#serv"+e+"-button").html('<img src="/images/loader.gif" />'),$.get("/engine/ajax/ajax.php",{ajax:"vote",id:e,type:t,uID:a},function(a){var n=s.innerHTML;if("thanks"==a){var o=s.innerHTML;"up"==t&&o++,o||(o="0"),$("#serv"+e+"-layer").html(o+' <span class="glyphicon glyphicon-ok"></span>'),$("#serv"+e+"-button").html(""),$.jGrowl("Вы успешно повысили рейтинг этого сервера!")}else"already"==a?($("#serv"+e+"-layer").html(n+' <span class="glyphicon glyphicon-remove"></span>'),$("#serv"+e+"-button").html(""),$.jGrowl("Вы уже голосовали за этот сервер сегодня. Попробуйте завтра!")):"already2"==a?($("#serv"+e+"-layer").html(n+' <span class="glyphicon glyphicon-remove"></span>'),$("#serv"+e+"-button").html(""),$.jGrowl("У этого сервера достигнут лимит голосов, попробуйте позже!")):($("#serv"+e+"-layer").html(n+' <span class="glyphicon glyphicon-remove"></span>'),$("#serv"+e+"-button").html(""),$.jGrowl("Неизвестная ошибка!"))})}function cache_update(e){var t=new lm_ajax,a="";t.setVar("ajax","cache"),t.setVar("game",e),t.requestFile="/engine/ajax/ajax.php",t.method="GET",t.element="cache-layer",t.sendAJAX(a)}function popup(e,t){"on"==t?document.getElementById(e).style.display="block":document.getElementById(e).style.display="none"}function favourites(e,t,a){document.getElementById("favourites-layer").innerHTML="Загрузка. Пожалуйста подождите...";var s=new lm_ajax,n="";s.setVar("ajax","favourites"),s.setVar("uID",e),s.setVar("sID",t),s.setVar("act",a),s.requestFile="/engine/ajax/ajax.php",s.method="GET",s.sendAJAX(n),s.onCompletion=function(){"add"==this.response?($.jGrowl("Сервер успешно добавлен в избранные"),document.getElementById("favourites-layer").innerHTML="Сервер успешно добавлен в избранные"):(document.getElementById("favourites-layer").innerHTML="Сервер был успешно удален из избранных",$.jGrowl("Сервер был успешно удален из избранных"))}}function show(e,t){"none"==$("#"+e+"_"+t).css("display")?$("#"+e+"_"+t).animate({height:"show"},300):$("#"+e+"_"+t).animate({height:"hide"},300,"linear")}function checkEmail(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)([a-z.0-9]{2,15})+$/;return t.test(e.value)?!0:(e.focus(),e.select(),e.style.borderColor="#DB8180",alert("Неправильный адрес электронной почты."),!1)}function password_test(){var e=document.getElementById("pass").value,t=document.getElementById("repass").value;return e!=t&&""!=t?(document.getElementById("status_quality").className="status_error",$.msgbox("<p>Введённые пароли не совпадают.</p>",{type:"error",buttons:[{type:"submit",value:"OK"}]}),!1):(status_test(),!0)}function status_test(e){var t,a=document.getElementById("pass").value,s=document.getElementById("mail").value,n=a.length,o=0,r=/[a-z]/,u=/[A-Z]/,l=/[0-9]/,c=/[\x21-\x2F]|[\x3A-\x40]|[\x5B-\x60]|[\x7B-\x7E]/;if(-1!=a.search(r)&&o++,-1!=a.search(u)&&o++,-1!=a.search(l)&&o++,-1!=a.search(c)&&o++,t=0==n?"":a==s?"coincide":4>n?"short":8>n||2>o?"weakpasswd":"ok",e){if(null!=e.charCode&&0!=e.charCode)var i=e.charCode;else if(e.keyCode)var i=e.keyCode;if(9==i)return!1}if("short"==t)return document.getElementById("status_quality").className="status_bad",document.getElementById("status_text").className="status_text_bad",document.getElementById("status_text").innerHTML="короткий ("+n+" cимвол"+accus125(n,"","а","ов")+")",!1;if("coincide"==t)return document.getElementById("status_quality").className="status_bad",document.getElementById("status_text").className="status_text_bad",document.getElementById("status_text").innerHTML="совпадает с логином ("+n+" символ"+accus125(n,"","а","ов")+")",!1;if("badchars"==t)return document.getElementById("status_quality").className="status_error",document.getElementById("status_text").className="status_text_error",document.getElementById("status_text").innerHTML="Недопустимые символы в пароле. Возможно, у вас включена русская раскладка клавиатуры. ("+n+" символ"+accus125(n,"","а","ов")+")",!1;if("badpasswd"==t)return document.getElementById("status_quality").className="status_error",document.getElementById("status_text").className="status_text_error",document.getElementById("status_text").innerHTML="Недопустимый ("+n+" символ"+accus125(n,"","а","ов")+")",!1;if("weakpasswd"==t)document.getElementById("status_quality").className="status_intermediate",document.getElementById("status_text").className="status_text_intermediate",document.getElementById("status_text").innerHTML="простой ("+n+" символ"+accus125(n,"","а","ов")+")";else{if("ok"!=t)return document.getElementById("status_quality").className="",document.getElementById("status_text").className="",document.getElementById("status_text").innerHTML="&nbsp;",!1;document.getElementById("status_quality").className="status_good",document.getElementById("status_text").className="status_text_good",document.getElementById("status_text").innerHTML="надёжный ("+n+" символ"+accus125(n,"","а","ов")+")"}}function accus125(e,t,a,s){return e>=10&&20>=e?s:e%10==1?t:e%10==2||e%10==3||e%10==4?a:s}function checkReview(e){return e.value?!0:(e.focus(),e.select(),e.style.borderColor="#DB8180",!1)}function checkbl(e){return e.value<1?(e.focus(),e.select(),e.style.borderColor="#DB8180",!1):!0}function ch_lth(){s=140-$("#postsender").val().length,s<0&&(s_val=$("#postsender").val().substring(0,140),$("#postsender").val(s_val),s=0),$("#postcounter").html(s)}function getConfirm(e){return!!confirm(e)}function displ(e){"none"==document.getElementById(e).style.display?document.getElementById(e).style.display="block":document.getElementById(e).style.display="none"}$(document).ready(function(){$(":password").keyboardLayout()}),jQuery(document).ready(function(e){e("a[rel*=mishakonsta]").facebox()});
